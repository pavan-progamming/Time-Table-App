{"ast":null,"code":"import _objectSpread from\"D:/time table/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';const api=axios.create({baseURL:'http://192.168.1.6:5000'});// Mock Database for Guest Mode\nconst getMockDB=()=>JSON.parse(localStorage.getItem('guest_db'))||{timetable:[],notifications:[]};const saveMockDB=db=>localStorage.setItem('guest_db',JSON.stringify(db));// Helper to delay response for realism\nconst delay=ms=>new Promise(resolve=>setTimeout(resolve,ms));// Add a request interceptor\napi.interceptors.request.use(async config=>{const token=localStorage.getItem('token');// --- OFFLINE / GUEST MODE HANDLING ---\nif(token==='guest-token'){console.log(\"[OFFLINE MODE] Intercepting \".concat(config.method.toUpperCase(),\" \").concat(config.url));// Wait 500ms to simulate network\nawait delay(500);const db=getMockDB();const adapter=new axios.AxiosAdapter();// Not used directly, implementing custom adapter logic\n// 1. TIMETABLE ROUTES\nif(config.url==='/timetable'&&config.method==='get'){config.adapter=()=>Promise.resolve({data:db.timetable,status:200,statusText:'OK',headers:{},config});}else if(config.url==='/timetable'&&config.method==='post'){const requestData=typeof config.data==='string'?JSON.parse(config.data):config.data;const newEntry=_objectSpread(_objectSpread({id:Date.now()},requestData),{},{is_completed:false});db.timetable.push(newEntry);saveMockDB(db);config.adapter=()=>Promise.resolve({data:newEntry,status:201,statusText:'Created',headers:{},config});}else if(config.url.startsWith('/timetable/')&&config.method==='delete'){const id=parseInt(config.url.split('/').pop());db.timetable=db.timetable.filter(t=>t.id!==id);saveMockDB(db);config.adapter=()=>Promise.resolve({data:{message:'Deleted'},status:200,statusText:'OK',headers:{},config});}else if(config.url.startsWith('/timetable/')&&config.method==='put'){const id=parseInt(config.url.split('/').pop());const requestData=typeof config.data==='string'?JSON.parse(config.data):config.data;const updates=requestData;db.timetable=db.timetable.map(t=>t.id===id?_objectSpread(_objectSpread({},t),updates):t);saveMockDB(db);config.adapter=()=>Promise.resolve({data:{message:'Updated'},status:200,statusText:'OK',headers:{},config});}// 2. NOTIFICATION ROUTES\nelse if(config.url==='/notifications'&&config.method==='get'){const mockNotifs=[{id:1,message:'Welcome to Offline Mode!',is_read:false},{id:2,message:'Your data is saved locally.',is_read:false}];config.adapter=()=>Promise.resolve({data:mockNotifs,status:200,statusText:'OK',headers:{},config});}else if(config.url.includes('/notifications')&&config.method==='put'){config.adapter=()=>Promise.resolve({data:{success:true},status:200,statusText:'OK',headers:{},config});}// 3. PING\nelse if(config.url==='/api/ping'){config.adapter=()=>Promise.resolve({data:{message:'Offline Mode Active'},status:200,statusText:'OK',headers:{},config});}return config;}// --- STANDARD ONLINE MODE ---\nconst fullUrl=\"\".concat(config.baseURL).concat(config.url);console.log(\">>> [\".concat(new Date().toLocaleTimeString(),\"] API CALL: \").concat(config.method.toUpperCase(),\" \").concat(fullUrl));if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});export default api;","map":{"version":3,"names":["axios","api","create","baseURL","getMockDB","JSON","parse","localStorage","getItem","timetable","notifications","saveMockDB","db","setItem","stringify","delay","ms","Promise","resolve","setTimeout","interceptors","request","use","config","token","console","log","concat","method","toUpperCase","url","adapter","AxiosAdapter","data","status","statusText","headers","requestData","newEntry","_objectSpread","id","Date","now","is_completed","push","startsWith","parseInt","split","pop","filter","t","message","updates","map","mockNotifs","is_read","includes","success","fullUrl","toLocaleTimeString","Authorization","error","reject"],"sources":["D:/time table/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://192.168.1.6:5000',\r\n});\r\n\r\n// Mock Database for Guest Mode\r\nconst getMockDB = () => JSON.parse(localStorage.getItem('guest_db')) || { timetable: [], notifications: [] };\r\nconst saveMockDB = (db) => localStorage.setItem('guest_db', JSON.stringify(db));\r\n\r\n// Helper to delay response for realism\r\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n// Add a request interceptor\r\napi.interceptors.request.use(\r\n    async (config) => {\r\n        const token = localStorage.getItem('token');\r\n\r\n        // --- OFFLINE / GUEST MODE HANDLING ---\r\n        if (token === 'guest-token') {\r\n            console.log(`[OFFLINE MODE] Intercepting ${config.method.toUpperCase()} ${config.url}`);\r\n\r\n            // Wait 500ms to simulate network\r\n            await delay(500);\r\n\r\n            const db = getMockDB();\r\n            const adapter = new axios.AxiosAdapter(); // Not used directly, implementing custom adapter logic\r\n\r\n            // 1. TIMETABLE ROUTES\r\n            if (config.url === '/timetable' && config.method === 'get') {\r\n                config.adapter = () => Promise.resolve({ data: db.timetable, status: 200, statusText: 'OK', headers: {}, config });\r\n            }\r\n\r\n            else if (config.url === '/timetable' && config.method === 'post') {\r\n                const requestData = typeof config.data === 'string' ? JSON.parse(config.data) : config.data;\r\n                const newEntry = { id: Date.now(), ...requestData, is_completed: false };\r\n                db.timetable.push(newEntry);\r\n                saveMockDB(db);\r\n                config.adapter = () => Promise.resolve({ data: newEntry, status: 201, statusText: 'Created', headers: {}, config });\r\n            }\r\n\r\n            else if (config.url.startsWith('/timetable/') && config.method === 'delete') {\r\n                const id = parseInt(config.url.split('/').pop());\r\n                db.timetable = db.timetable.filter(t => t.id !== id);\r\n                saveMockDB(db);\r\n                config.adapter = () => Promise.resolve({ data: { message: 'Deleted' }, status: 200, statusText: 'OK', headers: {}, config });\r\n            }\r\n\r\n            else if (config.url.startsWith('/timetable/') && config.method === 'put') {\r\n                const id = parseInt(config.url.split('/').pop());\r\n                const requestData = typeof config.data === 'string' ? JSON.parse(config.data) : config.data;\r\n                const updates = requestData;\r\n                db.timetable = db.timetable.map(t => t.id === id ? { ...t, ...updates } : t);\r\n                saveMockDB(db);\r\n                config.adapter = () => Promise.resolve({ data: { message: 'Updated' }, status: 200, statusText: 'OK', headers: {}, config });\r\n            }\r\n\r\n            // 2. NOTIFICATION ROUTES\r\n            else if (config.url === '/notifications' && config.method === 'get') {\r\n                const mockNotifs = [\r\n                    { id: 1, message: 'Welcome to Offline Mode!', is_read: false },\r\n                    { id: 2, message: 'Your data is saved locally.', is_read: false }\r\n                ];\r\n                config.adapter = () => Promise.resolve({ data: mockNotifs, status: 200, statusText: 'OK', headers: {}, config });\r\n            }\r\n            else if (config.url.includes('/notifications') && config.method === 'put') {\r\n                config.adapter = () => Promise.resolve({ data: { success: true }, status: 200, statusText: 'OK', headers: {}, config });\r\n            }\r\n\r\n            // 3. PING\r\n            else if (config.url === '/api/ping') {\r\n                config.adapter = () => Promise.resolve({ data: { message: 'Offline Mode Active' }, status: 200, statusText: 'OK', headers: {}, config });\r\n            }\r\n\r\n            return config;\r\n        }\r\n\r\n        // --- STANDARD ONLINE MODE ---\r\n        const fullUrl = `${config.baseURL}${config.url}`;\r\n        console.log(`>>> [${new Date().toLocaleTimeString()}] API CALL: ${config.method.toUpperCase()} ${fullUrl}`);\r\n\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}