{"ast":null,"code":"import axios from 'axios';\n\n// Mock Database for Offline Mode\n// We initialize it if it doesn't exist\nconst getLocalDB = () => {\n  const saved = localStorage.getItem('offline_db');\n  return saved ? JSON.parse(saved) : {\n    timetable: [],\n    notifications: [],\n    userSettings: {}\n  };\n};\nconst saveLocalDB = db => localStorage.setItem('offline_db', JSON.stringify(db));\n\n// Helper to simulate a slight network delay (optional, makes it feel less \"instant\"/fake if desired, but for offline, instant is good)\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst api = axios.create({\n  baseURL: 'http://localhost:3000' // Dummy URL, we won't hit it\n});\n\n// Full Override of the Request Adapter to prevent ANY network calls\napi.defaults.adapter = async config => {\n  console.log(`[OFFLINE ACTIONS] ${config.method.toUpperCase()} ${config.url}`);\n\n  // Simulate tiny delay for better UX (prevent flickering)\n  await delay(100);\n  const db = getLocalDB();\n\n  // -------------------------------------------------------------------------\n  // TIMETABLE ROUTES\n  // -------------------------------------------------------------------------\n\n  // GET /timetable\n  if (config.url === '/timetable' && config.method === 'get') {\n    // Filter out deleted items? NO, we just delete them from array.\n    return {\n      data: db.timetable,\n      status: 200,\n      statusText: 'OK',\n      headers: {},\n      config\n    };\n  }\n\n  // POST /timetable\n  if (config.url === '/timetable' && config.method === 'post') {\n    const requestData = typeof config.data === 'string' ? JSON.parse(config.data) : config.data;\n    const newEntry = {\n      id: Date.now(),\n      ...requestData,\n      is_completed: false,\n      created_at: new Date().toISOString()\n    };\n    db.timetable.push(newEntry);\n    saveLocalDB(db);\n    return {\n      data: newEntry,\n      status: 201,\n      statusText: 'Created',\n      headers: {},\n      config\n    };\n  }\n\n  // PUT /timetable/:id\n  if (config.url.startsWith('/timetable/') && config.method === 'put') {\n    const id = parseInt(config.url.split('/').pop());\n    const requestData = typeof config.data === 'string' ? JSON.parse(config.data) : config.data;\n    const index = db.timetable.findIndex(t => t.id === id);\n    if (index !== -1) {\n      db.timetable[index] = {\n        ...db.timetable[index],\n        ...requestData\n      };\n      saveLocalDB(db);\n      return {\n        data: db.timetable[index],\n        status: 200,\n        statusText: 'OK',\n        headers: {},\n        config\n      };\n    }\n    return {\n      data: {\n        message: 'Not Found'\n      },\n      status: 404,\n      statusText: 'Not Found',\n      headers: {},\n      config\n    };\n  }\n\n  // DELETE /timetable/:id\n  if (config.url.startsWith('/timetable/') && config.method === 'delete') {\n    const id = parseInt(config.url.split('/').pop());\n    db.timetable = db.timetable.filter(t => t.id !== id);\n    saveLocalDB(db);\n    return {\n      data: {\n        message: 'Deleted'\n      },\n      status: 200,\n      statusText: 'OK',\n      headers: {},\n      config\n    };\n  }\n\n  // -------------------------------------------------------------------------\n  // NOTIFICATION/SETTINGS ROUTES\n  // -------------------------------------------------------------------------\n\n  // GET /notifications\n  if (config.url === '/notifications' && config.method === 'get') {\n    return {\n      data: db.notifications || [],\n      status: 200,\n      statusText: 'OK',\n      headers: {},\n      config\n    };\n  }\n\n  // PUT /auth/profile (Settings)\n  if (config.url.includes('/auth/profile') && config.method === 'put') {\n    return {\n      data: {\n        message: 'Profile updated offline'\n      },\n      status: 200,\n      statusText: 'OK',\n      headers: {},\n      config\n    };\n  }\n\n  // Ping\n  if (config.url === '/api/ping') {\n    return {\n      data: {\n        message: 'Pong'\n      },\n      status: 200,\n      statusText: 'OK',\n      headers: {},\n      config\n    };\n  }\n\n  // Default fallback\n  return {\n    data: {\n      message: 'Offline Mock: Route not found'\n    },\n    status: 404,\n    statusText: 'Not Found',\n    headers: {},\n    config\n  };\n};\nexport default api;","map":{"version":3,"names":["axios","getLocalDB","saved","localStorage","getItem","JSON","parse","timetable","notifications","userSettings","saveLocalDB","db","setItem","stringify","delay","ms","Promise","resolve","setTimeout","api","create","baseURL","defaults","adapter","config","console","log","method","toUpperCase","url","data","status","statusText","headers","requestData","newEntry","id","Date","now","is_completed","created_at","toISOString","push","startsWith","parseInt","split","pop","index","findIndex","t","message","filter","includes"],"sources":["D:/time table/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Mock Database for Offline Mode\r\n// We initialize it if it doesn't exist\r\nconst getLocalDB = () => {\r\n    const saved = localStorage.getItem('offline_db');\r\n    return saved ? JSON.parse(saved) : { timetable: [], notifications: [], userSettings: {} };\r\n};\r\n\r\nconst saveLocalDB = (db) => localStorage.setItem('offline_db', JSON.stringify(db));\r\n\r\n// Helper to simulate a slight network delay (optional, makes it feel less \"instant\"/fake if desired, but for offline, instant is good)\r\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:3000', // Dummy URL, we won't hit it\r\n});\r\n\r\n// Full Override of the Request Adapter to prevent ANY network calls\r\napi.defaults.adapter = async (config) => {\r\n    console.log(`[OFFLINE ACTIONS] ${config.method.toUpperCase()} ${config.url}`);\r\n\r\n    // Simulate tiny delay for better UX (prevent flickering)\r\n    await delay(100);\r\n\r\n    const db = getLocalDB();\r\n\r\n    // -------------------------------------------------------------------------\r\n    // TIMETABLE ROUTES\r\n    // -------------------------------------------------------------------------\r\n\r\n    // GET /timetable\r\n    if (config.url === '/timetable' && config.method === 'get') {\r\n        // Filter out deleted items? NO, we just delete them from array.\r\n        return { data: db.timetable, status: 200, statusText: 'OK', headers: {}, config };\r\n    }\r\n\r\n    // POST /timetable\r\n    if (config.url === '/timetable' && config.method === 'post') {\r\n        const requestData = typeof config.data === 'string' ? JSON.parse(config.data) : config.data;\r\n        const newEntry = {\r\n            id: Date.now(),\r\n            ...requestData,\r\n            is_completed: false,\r\n            created_at: new Date().toISOString()\r\n        };\r\n        db.timetable.push(newEntry);\r\n        saveLocalDB(db);\r\n        return { data: newEntry, status: 201, statusText: 'Created', headers: {}, config };\r\n    }\r\n\r\n    // PUT /timetable/:id\r\n    if (config.url.startsWith('/timetable/') && config.method === 'put') {\r\n        const id = parseInt(config.url.split('/').pop());\r\n        const requestData = typeof config.data === 'string' ? JSON.parse(config.data) : config.data;\r\n\r\n        const index = db.timetable.findIndex(t => t.id === id);\r\n        if (index !== -1) {\r\n            db.timetable[index] = { ...db.timetable[index], ...requestData };\r\n            saveLocalDB(db);\r\n            return { data: db.timetable[index], status: 200, statusText: 'OK', headers: {}, config };\r\n        }\r\n        return { data: { message: 'Not Found' }, status: 404, statusText: 'Not Found', headers: {}, config };\r\n    }\r\n\r\n    // DELETE /timetable/:id\r\n    if (config.url.startsWith('/timetable/') && config.method === 'delete') {\r\n        const id = parseInt(config.url.split('/').pop());\r\n        db.timetable = db.timetable.filter(t => t.id !== id);\r\n        saveLocalDB(db);\r\n        return { data: { message: 'Deleted' }, status: 200, statusText: 'OK', headers: {}, config };\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // NOTIFICATION/SETTINGS ROUTES\r\n    // -------------------------------------------------------------------------\r\n\r\n    // GET /notifications\r\n    if (config.url === '/notifications' && config.method === 'get') {\r\n        return { data: db.notifications || [], status: 200, statusText: 'OK', headers: {}, config };\r\n    }\r\n\r\n    // PUT /auth/profile (Settings)\r\n    if (config.url.includes('/auth/profile') && config.method === 'put') {\r\n        return { data: { message: 'Profile updated offline' }, status: 200, statusText: 'OK', headers: {}, config };\r\n    }\r\n\r\n    // Ping\r\n    if (config.url === '/api/ping') {\r\n        return { data: { message: 'Pong' }, status: 200, statusText: 'OK', headers: {}, config };\r\n    }\r\n\r\n    // Default fallback\r\n    return { data: { message: 'Offline Mock: Route not found' }, status: 404, statusText: 'Not Found', headers: {}, config };\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}